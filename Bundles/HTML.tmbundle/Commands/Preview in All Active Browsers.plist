<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>beforeRunningCommand</key>
	<string>saveActiveFile</string>
	<key>command</key>
	<string>### Preview in All Active Browsers
### v1.0. 2005-03-29
### v1.1. 2005-12-04
### v2.2. 2006-11-03
###
###	CONFIG OPTION:: Set TM_PROJECT_SITEURL in your TM Project Window Info Button in the following form: [ http://your.site.ext/ ]
###

# 1. Check if we have a SITE_URL
if [[ -n "$TM_PROJECT_SITEURL" ]]
    then activeURL="$TM_PROJECT_SITEURL${TM_FILEPATH##$TM_PROJECT_DIRECTORY}"
    else activeURL="file://$TM_FILEPATH"
fi

osascript &lt;&lt;"APPLESCRIPT" - "$activeURL"
on run(argv)
    set activeURL to item 1 of argv
    tell app "System Events" to set proclist to name of every application process
    if proclist contains "Webkit" then
        run script "on run(argv)" &amp; return &amp; "tell app \"Webkit\" to make new document with properties {URL: item 1 of argv}" &amp; return &amp; "end run" with parameters {activeURL}
    end if
    if proclist contains "Safari" then
        run script "on run(argv)" &amp; return &amp; "tell app \"Safari\" to make new document with properties {URL: item 1 of argv}" &amp; return &amp; "end run" with parameters {activeURL}
    end if
    
    if proclist contains "$1" then
    run script "on run(argv)" &amp; return &amp; "tell app \"$1\" to `pbpaste`" &amp; return &amp; "end run" with parameters {activeURL}
end if
    
    if proclist contains "Shiira" then
        run script "on run(argv)" &amp; return &amp; "tell app \"Shiira\" to make new document with properties {URL: item 1 of argv}" &amp; return &amp; "end run" with parameters {activeURL}
    end if
    if proclist contains "Firefox" then
        run script "on run(argv)" &amp; return &amp; "tell app \"Firefox\" to Get URL (item 1 of argv) inside window 1" &amp; return &amp; "end run" with parameters {activeURL}
    end if
    if proclist contains "Internet Explorer" then
        run script "on run(argv)" &amp; return &amp; "tell app \"Internet Explorer\" to activate OpenURL (item 1 of argv) toWindow 0 Flags 1" &amp; return &amp; "end run" with parameters {activeURL}
    end if
    if proclist contains "OmniWeb" then
        run script "on run(argv)" &amp; return &amp; "tell app \"OmniWeb\" to GetURL (item 1 of argv)" &amp; return &amp; "end run" with parameters {activeURL}
    end if
    if proclist contains "Camino" then
        run script "on run(argv)" &amp; return &amp; "tell app \"Camino\" to Get URL (item 1 of argv)" &amp; return &amp; "end run" with parameters {activeURL}
    end if
    if proclist contains "Xyle scope" then
        run script "on run(argv)" &amp; return &amp; "tell app \"Xyle scope\" to Get URL (item 1 of argv)" &amp; return &amp; "end run" with parameters {activeURL}
    end if
end run
APPLESCRIPT</string>
	<key>input</key>
	<string>none</string>
	<key>name</key>
	<string>Open Document in Running Browser(s)</string>
	<key>output</key>
	<string>discard</string>
	<key>scope</key>
	<string>text.html</string>
	<key>uuid</key>
	<string>970EE6B4-A091-11D9-A5A2-000D93C8BE28</string>
</dict>
</plist>
